# PKI settings for Filebeat

On Filebeat, you should use input over TLS like `input tcp`, etc.
So you need to generate TLS certificate and key for this inputs.
To help you, the operator permit to managed internal PKI and generate for you the certificates and keys.

The certificates and keys are store on path `/usr/share/filebeat/certs`. So you just need the referer the path on inputs settings.

You can use the following setting to drive the PKI:
- **enabled** (bool): Set to `true` to enable the PKI. Default to `true`
- **validityDays** (number): It's the number of days that the certificate generated by operator will be valide. Default to `365`
- **renewalDays** (number): It's the number of days before certificat expire. After that, the operator will renew certificates. Default to `30`.
- **keySize** (number): It's the key size used to generate private keys. Default to `2048`.
- **tls** (map of object): The key is the used as base name for certificate and key file.
    - **altIPs** (slice of string): You can add alternative IPs when operator generate API certificate.
    - **altNames** (slice of string): You can add alternative name when operator generate API certificate.


> be carefull when use it on production. You need manual intervention to propagate new certificate when operator renew it. More over, it will renew certificate and CA on same step.

## Tips

### Change altNames or altIPs

If you need to change `altIPs` or `altNames`, the first step consist to update the Filebeat custom resource. But after that, you need to remove entries of your certificate / key from the secret. Without this, the certificat is never updated.