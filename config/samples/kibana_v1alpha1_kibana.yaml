apiVersion: kibana.k8s.webcenter.fr/v1alpha1
kind: Kibana
metadata:
  labels:
    env: test
  name: sample
spec:
  version: 8.5.1
  elasticsearchRef:
    name: sample
  endpoint:
    ingress:
      enabled: true
      host: kb-sample.cluster.local
      secretRef:
        name: kb-sample-tls
      annotations:
        nginx.ingress.kubernetes.io/ssl-redirect: "true"
        nginx.ingress.kubernetes.io/proxy-body-size: 512M
        nginx.ingress.kubernetes.io/proxy-connect-timeout: "600"
        nginx.ingress.kubernetes.io/proxy-read-timeout: "600"
        nginx.ingress.kubernetes.io/proxy-send-timeout: "600"
  config:
      kibana.yml: |
        elasticsearch.requestTimeout: 300000
        data.autocomplete.valueSuggestions.timeout: 3000
        xpack.reporting.roles.enabled: false
  deployment:
    replicas: 1
    resources:
      requests:
        cpu: 300m
        memory: 300Mi
      limits:
        cpu: 1000m
        memory: 1Gi
    node: --max-old-space-size=2048